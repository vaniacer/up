{% load bootstrap3 %}

<h3>Updates</h3>

{% include "ups/project_updates_buttons.html" %}

{% for update in updates %}

    <div class="panel panel-default"
         onclick="selector('ux{{ update.id }}', 'ub{{ update.id }}', '{{ update }}', 'SU')">

        <div class="panel-heading">
            <h4 class="Name">{{ update }}</h4>
            {% if "edit_update" in pr_view_perms %}
                <a href="{% url 'ups:edit_update' update.id %}" class="Edit">Edit</a>
            {% endif %}
            {% if "dld_update" in pr_view_perms %}
                <a onclick="selector('ux{{ update.id }}', 'ub{{ update.id }}', '{{ update }}', 'SU')"
                   href="/download_upd/{{ project.id }}/{{ update.id }}"
                   class="Edit">Download</a>
            {% endif %}
        </div>

        <div class="panel-body update-body" id="ub{{ update.id }}">
            <dl class="dl-horizontal update-panel">
                <!--<dt>File</dt><dd>{{ update.file }}</dd>-->
                <dt>Size</dt><dd>{{ update.file.size|filesizeformat }}</dd>
                <dt>Description</dt><dd>{{ update.desc|linebreaks }}</dd>
                <dt><small>Added by</small></dt><dd><small>{{ update.user }}</small></dd>
                <dt><small>Date added</small></dt><dd><small>{{ update.date|date:'M d, Y H:i' }}</small></dd>
            </dl>
            {% if "run_command" in pr_view_perms %}
                <!--Hidden checkboxes-->
                <input  class="hidden"
                        type="checkbox"
                        readonly="readonly"
                        id="ux{{ update.id }}"
                        name="selected_updates"
                        value="{{ update.file }}"
                        data-target="{{ update }}"/>
            {% endif %}
        </div>

    </div> <!-- panel -->

{% empty %}
    There are no updates for this project yet.
{% endfor %}