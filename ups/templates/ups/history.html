{% extends "ups/base.html" %}

{% block header %}

    <title>UpS: {{project}} history log</title>

    <div class="row">
        <br>
        <h4 class="Name">{{project}} history</h4>
    </div>

{% endblock header %}
{% block content %}

    <div class="hidden">
        <input id="id_server_info"/><input id="id_script_info"/>
        <input id="id_update_info"/><input id="id_dbdump_info"/>
        <input id="id_job_info"/>
    </div>

    {% if history %}
        {% include "ups/history_paginator.html" %}
    {% endif %}

    {% for event in history %}

        <dl class="dl-horizontal" id="event{{event.id}}">
            {% if event.serv %}
                <dt>Server name</dt><dd>{{event.serv}}</dd>
            {% endif %}
            <dt>Event name</dt><dd>{{event.name}}</dd>
            {% if event.cron %}
                <dt>Cron name</dt><dd>{{event.cron}}</dd>
                <dt>Cron date</dt><dd>{{event.cdat|capfirst}}</dd>
            {% endif %}
            <dt>Event  log</dt><dd class="log"><tt>{{event.desc|safe}}</tt></dd>
            <dt>Error code</dt><dd>{{event.exit}}</dd>

            <dt class="small">User</dt><dd class="small">{{event.user}}</dd>
            <dt class="small">Date</dt><dd class="small">{{event.date|date:'M d, Y H:i'}}</dd>
        </dl>

        <hr>

        <script type="text/javascript">
            color('event{{event.id}}', '{{event.exit}}', '{{event.cron}}');
        </script>

    {% empty %}
        <br>There are no events in this project yet.
    {% endfor %}

    {% if history %}
        {% include "ups/history_paginator.html" %}
    {% endif %}

    {% include "ups/up_down_buttons.html" %}

{% endblock content %}