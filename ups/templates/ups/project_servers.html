{% load bootstrap3 %}

<br>

{% buttons %}
    {% if "run_command" in pr_view_perms %}
        <input type="button" class="btn btn-info btn-xs" value="Select All"
               onclick="select_all('selected_servers', 'server-body', true)"/>
        <input type="button" class="btn btn-info btn-xs" value="Deselect All"
               onclick="select_all('selected_servers', 'server-body', false)"/>
    {% endif %}
    {% if "add_server" in pr_view_perms %}
        <a class="btn btn-success btn-xs" href="{% url 'ups:new_server' project.id %}">Add new server</a>
    {% endif %}
{% endbuttons %}

{% for server in servers %}

    <div class="panel panel-default" onclick="checker('server_box{{ server.id }}', 'server_body{{ server.id }}')">

        <div class="panel-heading">
            <h4 style="display:inline-block">{{ server.name }}</h4>
            {% if "edit_server" in pr_view_perms %}
                <small style="display:inline-block"><a href="{% url 'ups:edit_server' server.id %}">Edit</a></small>
            {% endif %}
        </div>

        <div class="panel-body server-body" id="server_body{{ server.id }}">
            <div class="pull-left">
                <dl class="dl-horizontal">
                    <dt>Server address</dt><dd>{{ server.addr }}</dd>
                    <dt>Working folder</dt><dd>{{ server.wdir }}</dd>
                    <dt>Description</dt><dd>{{ server.desc|linebreaks }}</dd>
                    <dt><small>Date added</small></dt><dd><small>{{ server.date|date:'M d, Y H:i' }}</small></dd>
                </dl>
            </div>

            {% if "run_command" in pr_view_perms %}
                <div class="pull-right">
                    <label>
                        Click to select
                        <input style="display:none" type="checkbox" name="selected_servers"
                               value="{{ server.id }}" id="server_box{{ server.id }}"/>
                    </label>
                </div>
            {% endif %}
        </div>

    </div> <!-- panel -->

{% empty %}
There are no servers for this project yet.

{% endfor %}