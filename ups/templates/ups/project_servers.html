{% load bootstrap3 %}

<h3>Servers</h3>

{% include "ups/project_servers_buttons.html" %}

{% for server in servers %}

    <div class="panel panel-default"
         onclick="selector('sx{{ server.id }}', 'sb{{ server.id }}', '{{ server }}', 'SS')">

        <div class="panel-heading">
            <h4 class="Name">{{ server.name }}</h4>
            {% if "edit_server" in pr_view_perms %}
                <a href="{% url 'ups:edit_server' server.id %}" class="Edit">Edit</a>
            {% endif %}
            {% if "run_command" in pr_view_perms %}
                {% include "ups/commands_servers.html" %}
            {% endif %}
        </div>

        <div class="panel-body server-body" id="sb{{ server.id }}">
            <dl class="dl-horizontal">
                <dt>Server address</dt><dd>{{ server.addr }}</dd>
                <dt>Working folder</dt><dd>{{ server.wdir }}</dd>
                <dt>Server bind port</dt><dd>{{ server.port }}</dd>
                <dt>Description</dt><dd>{{ server.desc|linebreaks|urlize }}</dd>
                <dt><small>Added by</small></dt><dd><small>{{ server.user }}</small></dd>
                <dt><small>Date added</small></dt><dd><small>{{ server.date|date:'M d, Y H:i' }}</small></dd>
            </dl>
            {% if "run_command" in pr_view_perms %}
                <!--Hidden checkboxes-->
                <input  class="hidden"
                        type="checkbox"
                        readonly="readonly"
                        id="sx{{ server.id }}"
                        name="selected_servers"
                        data-target="{{ server }}"
                        value="{{ server.addr }}:{{ server.wdir }}:{{ server.port }}"/>
            {% endif %}
        </div>

    </div> <!-- panel -->

{% empty %}
    There are no servers for this project yet.
{% endfor %}